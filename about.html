<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>Project H â€“ About</title>
    <link rel="stylesheet" href="about.css" />
</head>

<body>

    <!-- ==================== GNB ==================== -->
    <header class="gnb">
        <img src="public/service/gnb_icon.svg" class="gnb-logo-icon" alt="gnb icon" />

        <nav class="gnb-nav">
            <a href="about.html" class="active">About</a>
            <a href="design.html">Design</a>
            <a href="service.html">Service</a>
            <a href="#video-section">Video</a>
        </nav>

        <button class="gnb-menu">
            <svg width="24" height="18" viewBox="0 0 24 18" fill="#56AFDF" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M0 1.5C0 0.671573 0.671573 0 1.5 0H22.5C23.3284 0 24 0.671573 24 1.5C24 2.32843 23.3284 3 22.5 3H1.5C0.671573 3 0 2.32843 0 1.5Z" />
                <path
                    d="M0 9C0 8.17157 0.671573 7.5 1.5 7.5H22.5C23.3284 7.5 24 8.17157 24 9C24 9.82843 23.3284 10.5 22.5 10.5H1.5C0.671573 10.5 0 9.82843 0 9Z" />
                <path
                    d="M0 16.5C0 15.6716 0.671573 15 1.5 15H22.5C23.3284 15 24 15.6716 24 16.5C24 17.3284 23.3284 18 22.5 18H1.5C0.671573 18 0 17.3284 0 16.5Z" />
            </svg>
        </button>

        <!-- í–„ë²„ê±° ë“œë¡­ë‹¤ìš´ íŒ¨ë„ -->
        <div class="gnb-menu-panel">
            <a class="gnb-menu-item" href="https://planner-dabinpark.notion.site" target="_blank"
                rel="noopener noreferrer">
                ë°•ë‹¤ë¹ˆ
            </a>
            <a class="gnb-menu-item" href="https://stile.im" target="_blank" rel="noopener noreferrer">
                ë…¸ê¶Œí›„
            </a>
            <a class="gnb-menu-item" href="https://www.instagram.com/oneul_is_day/" target="_blank"
                rel="noopener noreferrer">
                ì‹¬ì •ë¹ˆ
            </a>
            <a class="gnb-menu-item" href="https://www.behance.net/caf4d781/projects" target="_blank"
                rel="noopener noreferrer">
                ì˜¤ì •ì€
            </a>
            <a class="gnb-menu-item" href="https://ji009868.github.io/portfolio/" target="_blank"
                rel="noopener noreferrer">
                ë°°ì¤€ì¼
            </a>
            <a class="gnb-menu-item" href="https://dmdhyunk.github.io/react-portfolio/" target="_blank"
                rel="noopener noreferrer">
                ê¹€ì§€í˜„
            </a>
        </div>
    </header>

    <!-- ==================== ABOUT WRAPPER ==================== -->
    <main class="about-wrapper">
        <img src="public/about/planning.svg" class="about-planning" alt="planning" />

        <img src="public/about/overview.svg" class="about-overview" alt="overview" />

        <img src="public/about/overview_1.svg" class="about-overview-1" alt="overview detail 1" />

        <img src="public/about/overview_2.svg" class="about-overview-2" alt="overview detail 2" />

        <img src="public/about/overview_3.svg" class="about-overview-3" alt="overview detail 3" />

        <img src="public/about/background.svg" class="about-background" alt="background" />


        <img src="public/about/background_1.svg" class="about-background-1 bg-hover" alt="background 1" />
        <img src="public/about/background_2.svg" class="about-background-2 bg-hover" alt="background 2" />
        <img src="public/about/background_3.svg" class="about-background-3 bg-hover" alt="background 3" />

        <div class="about-blue-box"></div>

        <img src="public/about/background1.svg" class="about-background1" alt="background1" />

        <img src="public/about/background1_1.svg" class="about-background1-1 bg-hover" alt="background1 1" />
        <img src="public/about/background1_2.svg" class="about-background1-2 bg-hover" alt="background1 2" />
        <img src="public/about/background1_3.svg" class="about-background1-3 bg-hover" alt="background1 3" />


        <img src="public/about/problem_line.svg" class="about-problem-line" alt="problem line" />

        <img src="public/about/problem_Rectangle.svg" class="about-problem-rectangle" alt="problem rectangle" />

        <div class="about-problem-1"></div>
        <div class="about-problem-2"></div>
        <div class="about-problem-3"></div>

        <img src="public/about/solution.svg" class="about-solution" alt="solution" />
        <div class="about-blue-bg"></div>

        <img src="public/about/solution_1.svg" class="about-solution-1" alt="solution 1" />
        <img src="public/about/solution_2.svg" class="about-solution-2" alt="solution 2" />
        <img src="public/about/solution_3.svg" class="about-solution-3" alt="solution 3" />
        <img src="public/about/solution_4.svg" class="about-solution-4" alt="solution 4" />

        <div class="about-before-after">
            <div class="ba-wrapper">

                <!-- BEFORE -->
                <div class="ba-panel ba-before">
                    <img src="public/about/before.svg" alt="">
                    <div class="ba-badge ba-badge--before">Before</div>

                    <!-- ğŸ”½ ìƒˆë¡œìš´ í…ìŠ¤íŠ¸ -->
                    <div class="ba-caption ba-caption--before">
                        ë°˜ë³µë˜ê³  ì§€ì¹˜ëŠ” ë„ì‹œ ìƒí™œ
                    </div>
                </div>

                <!-- ì¤‘ì•™ ë²„íŠ¼ -->
                <div class="ba-center-btn">
                    <img src="public/about/bf.svg" alt="">
                </div>

                <!-- AFTER -->
                <div class="ba-panel ba-after">
                    <img src="public/about/after.svg" alt="">
                    <div class="ba-badge ba-badge--after">After</div>

                    <!-- ğŸ”½ ìƒˆë¡œìš´ í…ìŠ¤íŠ¸ -->
                    <div class="ba-caption ba-caption--after">
                        ì•ˆì •ê³¼ í‰í™”ë¥¼ ì°¾ì€ ë¡œì»¬ ìƒí™œ
                    </div>
                </div>

            </div>
        </div>

        <img src="public/about/survey.svg" class="about-survey" alt="survey" />

        <img src="public/about/survey_1.svg" class="about-survey-1" alt="survey 1" />
        <img src="public/about/survey_2.svg" class="about-survey-2" alt="survey 2" />

        <img src="public/about/fieldtext_1.svg" class="about-fieldtext-1" alt="field text 1" />
        <img src="public/about/fieldtext_2.svg" class="about-fieldtext-2" alt="field text 2" />

        <!-- ===== í•„ë“œ ì‚¬ì§„ ìŠ¤íƒ ===== -->
        <img src="public/about/field_pic_1.svg" alt="í•„ë“œ ì‚¬ì§„ 1" class="about-fieldpic about-fieldpic-1" />

        <img src="public/about/field_pic_2.svg" alt="í•„ë“œ ì‚¬ì§„ 2" class="about-fieldpic about-fieldpic-2" />

        <img src="public/about/field_pic_3.svg" alt="í•„ë“œ ì‚¬ì§„ 3" class="about-fieldpic about-fieldpic-3" />

        <img src="public/about/field_pic_4.svg" alt="í•„ë“œ ì‚¬ì§„ 4" class="about-fieldpic about-fieldpic-4" />

        <img src="public/about/field_pic_5.svg" alt="í•„ë“œ ì‚¬ì§„ 5" class="about-fieldpic about-fieldpic-5" />

        <img src="public/about/field_pic_6.svg" alt="í•„ë“œ ì‚¬ì§„ 6" class="about-fieldpic about-fieldpic-6" />

        <!-- ============ FIELD PIC 7~11 ============ -->
        <img src="public/about/field_pic_7.svg" alt="field pic 7" class="about-fieldpic about-fieldpic-7">

        <img src="public/about/field_pic_8.svg" alt="field pic 8" class="about-fieldpic about-fieldpic-8">

        <img src="public/about/field_pic_9.svg" alt="field pic 9" class="about-fieldpic about-fieldpic-9">

        <img src="public/about/field_pic_10.svg" alt="field pic 10" class="about-fieldpic about-fieldpic-10">

        <img src="public/about/field_pic_11.svg" alt="field pic 11" class="about-fieldpic about-fieldpic-11">


        <!-- í¼ì„¼íŠ¸ ì¹´ë“œ 4ê°œ -->
        <div class="about-per-card per-card-1">
            <img src="public/about/per_1.svg" class="per-img per-base" alt="per 1" />
            <img src="public/about/per_5.svg" class="per-img per-hover" alt="per 1 hover" />
        </div>

        <div class="about-per-card per-card-2">
            <img src="public/about/per_2.svg" class="per-img per-base" alt="per 2" />
            <img src="public/about/per_6.svg" class="per-img per-hover" alt="per 2 hover" />
        </div>

        <div class="about-per-card per-card-3">
            <img src="public/about/per_3.svg" class="per-img per-base" alt="per 3" />
            <img src="public/about/per_7.svg" class="per-img per-hover" alt="per 3 hover" />
        </div>

        <div class="about-per-card per-card-4">
            <img src="public/about/per_4.svg" class="per-img per-base" alt="per 4" />
            <img src="public/about/per_8.svg" class="per-img per-hover" alt="per 4 hover" />
        </div>

        <div class="about-blue-box"></div>

        <img src="public/about/text_1.svg" class="about-text-1 scroll-fade" />
        <img src="public/about/text_2.svg" class="about-text-2 scroll-fade" />
        <img src="public/about/text_3.svg" class="about-text-3 scroll-fade" />
        <img src="public/about/text_4.svg" class="about-text-4 scroll-fade" />

        <img src="public/about/dot_1.svg" class="about-dot-1 scroll-fade" alt="dot 1" />
        <img src="public/about/dot_2.svg" class="about-dot-2 scroll-fade" alt="dot 2" />
        <img src="public/about/dot_3.svg" class="about-dot-3 scroll-fade" alt="dot 3" />

        <!-- VIDEO SECTION -->
        <video id="video-section" class="about-video" src="public/project.h.mp4" muted playsinline></video>
        <img src="public/design/footer.svg" class="design-footer" alt="footer" />


    </main>

    <!-- gnb scroll fade logic + solution scroll ì• ë‹ˆë©”ì´ì…˜ -->
    <script>
        // ================== GNB ì‚¬ë¼ì¡Œë‹¤ ë‚˜íƒ€ë‚˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ ==================
        (function () {
            const gnb = document.querySelector(".gnb");
            if (!gnb) return;

            let lastScrollY = window.pageYOffset;
            let ticking = false;

            function handleScroll() {
                const currentY = window.pageYOffset;
                const diff = currentY - lastScrollY;

                if (diff > 10) {
                    gnb.classList.add("gnb--hidden");
                } else if (diff < -10) {
                    gnb.classList.remove("gnb--hidden");
                }

                lastScrollY = currentY;
                ticking = false;
            }

            window.addEventListener("scroll", () => {
                if (!ticking) {
                    window.requestAnimationFrame(handleScroll);
                    ticking = true;
                }
            });
        })();


        // ================== SOLUTION ì¹´ë“œ: ë·°í¬íŠ¸ ì•ˆ/ë°–ì— ë”°ë¼ í™œì„±/ë¹„í™œì„± ==================
        (function () {
            const sol1 = document.querySelector(".about-solution-1");
            const sol2 = document.querySelector(".about-solution-2");
            const sol3 = document.querySelector(".about-solution-3");
            const sol4 = document.querySelector(".about-solution-4");

            if (!sol1 || !sol2 || !sol3 || !sol4) return;

            const items = [sol1, sol2, sol3, sol4];

            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        // sol1 ê¸°ì¤€ìœ¼ë¡œ êµ¬ê°„ íŒë‹¨
                        if (entry.target !== sol1) return;

                        if (entry.isIntersecting) {
                            // êµ¬ê°„ ì•ˆì— ë“¤ì–´ì˜¤ë©´: 1~4 ëª¨ë‘ active ì¶”ê°€
                            items.forEach((el) => el.classList.add("active"));
                        } else {
                            // êµ¬ê°„ì—ì„œ ë²—ì–´ë‚˜ë©´: 1~4 ëª¨ë‘ active ì œê±° â†’ ë‹¤ì‹œ ì‚¬ë¼ì§
                            items.forEach((el) => el.classList.remove("active"));
                        }
                    });
                },
                {
                    threshold: 0.3, // sol1ì´ í™”ë©´ì— 30% ì •ë„ ë“¤ì–´ì™”ì„ ë•Œë¥¼ ê¸°ì¤€
                }
            );

            observer.observe(sol1);
        })();

        (function () {
            const targets = document.querySelectorAll(".scroll-fade");
            if (!("IntersectionObserver" in window) || !targets.length) return;

            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add("is-visible");
                        } else {
                            entry.target.classList.remove("is-visible");
                        }
                    });
                },
                {
                    threshold: 0.2 // ìš”ì†Œ 20%ê°€ ë“¤ì–´ì˜¬ ë•Œ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
                }
            );

            targets.forEach((el) => observer.observe(el));
        })();

        // ==================== VIDEO AUTOPLAY ON SCROLL ====================
        const aboutVideo = document.querySelector(".about-video");

        if (aboutVideo) {
            // ìŠ¤í¬ë¡¤ë¡œ ë³´ì„/ì•ˆ ë³´ì„ ê°ì§€
            const videoObserver = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            // ìë™ ì¬ìƒ
                            if (aboutVideo.paused) {
                                aboutVideo.play().catch(() => { });
                            }
                        } else {
                            // ìë™ ì¼ì‹œì •ì§€
                            aboutVideo.pause();
                        }
                    });
                },
                {
                    threshold: 0.5, // í™”ë©´ì— 50% ë“¤ì–´ì˜¤ë©´ ì¬ìƒ
                }
            );

            videoObserver.observe(aboutVideo);

            // í´ë¦­ ì‹œ ì¬ìƒ/ì¼ì‹œì •ì§€ í† ê¸€
            aboutVideo.addEventListener("click", () => {
                if (aboutVideo.paused) {
                    aboutVideo.play();
                } else {
                    aboutVideo.pause();
                }
            });
        }

        (function () {
            /**
             * í•˜ë‚˜ì˜ ê·¸ë£¹ì— ëŒ€í•´
             * - íŠ¹ì • ìš”ì†Œê°€ ë·°í¬íŠ¸ì— ë“¤ì–´ì˜¤ë©´ ìˆœì„œëŒ€ë¡œ is-visible ì¶”ê°€
             * - ë‹¤ì‹œ ë‚˜ê°€ë©´ is-visible ì œê±°
             */
            function setupFieldPicGroup(selectors, triggerIndex) {
                const group = selectors
                    .map(sel => document.querySelector(sel))
                    .filter(Boolean);

                if (!group.length) return;

                const trigger = group[Math.min(triggerIndex, group.length - 1)];
                const timers = [];
                const STAGGER = 140; // í•œ ì¥ì”© ë”œë ˆì´(ms)

                const observer = new IntersectionObserver(
                    entries => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                // ìˆœì°¨ ë“±ì¥
                                group.forEach((el, idx) => {
                                    const t = setTimeout(() => {
                                        el.classList.add("is-visible");
                                    }, idx * STAGGER);
                                    timers.push(t);
                                });
                            } else {
                                // ë‹¤ì‹œ ìœ„ë¡œ ìŠ¤í¬ë¡¤ë˜ë©´ ë‹¤ ìˆ¨ê¸°ê¸°
                                timers.forEach(t => clearTimeout(t));
                                group.forEach(el => el.classList.remove("is-visible"));
                            }
                        });
                    },
                    {
                        threshold: 0.35,
                    }
                );

                observer.observe(trigger);
            }

            // ====== ê·¸ë£¹ 1 : field_pic_1 ~ field_pic_6 ======
            setupFieldPicGroup(
                [
                    ".about-fieldpic-1",
                    ".about-fieldpic-2",
                    ".about-fieldpic-3",
                    ".about-fieldpic-4",
                    ".about-fieldpic-5",
                    ".about-fieldpic-6",
                ],
                2 // 3ë²ˆì§¸(0 ê¸°ë°˜ index 2)ë¥¼ íŠ¸ë¦¬ê±°ë¡œ ì‚¬ìš©
            );

            // ====== ê·¸ë£¹ 2 : field_pic_7 ~ field_pic_11 ======
            setupFieldPicGroup(
                [
                    ".about-fieldpic-7",
                    ".about-fieldpic-8",
                    ".about-fieldpic-9",
                    ".about-fieldpic-10",
                    ".about-fieldpic-11",
                ],
                2 // ì´ ê·¸ë£¹ë„ ê°€ìš´ë° ì •ë„ ë˜ëŠ” ìš”ì†Œë¥¼ íŠ¸ë¦¬ê±°ë¡œ
            );
        })();

        (function () {
            const menuBtn = document.querySelector(".gnb-menu");
            const panel = document.querySelector(".gnb-menu-panel");

            if (!menuBtn || !panel) return;

            // í–„ë²„ê±° í´ë¦­ -> ì—´ê³  ë‹«ê¸°
            menuBtn.addEventListener("click", function (e) {
                e.stopPropagation();
                panel.classList.toggle("is-open");
            });

            // íŒ¨ë„ ì•ˆ ë§í¬ í´ë¦­ ì‹œ ìë™ ë‹«ê¸°
            panel.addEventListener("click", function (e) {
                if (e.target.matches(".gnb-menu-item")) {
                    panel.classList.remove("is-open");
                }
            });

            // ë°”ê¹¥ ì˜ì—­ í´ë¦­ ì‹œ ë‹«ê¸°
            document.addEventListener("click", function (e) {
                if (!panel.classList.contains("is-open")) return;
                if (panel.contains(e.target) || menuBtn.contains(e.target)) return;
                panel.classList.remove("is-open");
            });

            // ìŠ¤í¬ë¡¤ ë‚´ë¦¬ë©´ ìë™ìœ¼ë¡œ ë‹«ê¸° (ì›í•˜ë©´ ì œê±°í•´ë„ ë¨)
            window.addEventListener("scroll", function () {
                if (panel.classList.contains("is-open")) {
                    panel.classList.remove("is-open");
                }
            });
        })();
    </script>
</body>

</html>