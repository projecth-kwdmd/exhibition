<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>Project H – Design</title>
  <link rel="stylesheet" href="design.css" />
</head>

<body>
  <!-- ==================== GNB ==================== -->
  <header class="gnb">
    <!-- 로고 아이콘 -->
    <img src="public/service/gnb_icon.svg" class="gnb-logo-icon" alt="gnb icon" />

    <!-- 메뉴 -->
    <nav class="gnb-nav">
      <a href="about.html">About</a>
      <a href="design.html" class="active">Design</a>
      <a href="service.html">Service</a>
      <a href="about.html#video-section">Video</a>
    </nav>

    <!-- 햄버거 버튼 -->
    <button class="gnb-menu" type="button" aria-label="open menu">
      <svg width="24" height="18" viewBox="0 0 24 18" fill="#56AFDF" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M0 1.5C0 0.671573 0.671573 0 1.5 0H22.5C23.3284 0 24 0.671573 24 1.5C24 2.32843 23.3284 3 22.5 3H1.5C0.671573 3 0 2.32843 0 1.5Z" />
        <path
          d="M0 9C0 8.17157 0.671573 7.5 1.5 7.5H22.5C23.3284 7.5 24 8.17157 24 9C24 9.82843 23.3284 10.5 22.5 10.5H1.5C0.671573 10.5 0 9.82843 0 9Z" />
        <path
          d="M0 16.5C0 15.6716 0.671573 15 1.5 15H22.5C23.3284 15 24 15.6716 24 16.5C24 17.3284 23.3284 18 22.5 18H1.5C0.671573 18 0 17.32843 0 16.5Z" />
      </svg>
    </button>

    <!-- 햄버거 드롭다운 패널 -->
    <div class="gnb-menu-panel">
      <a class="gnb-menu-item" href="https://planner-dabinpark.notion.site" target="_blank" rel="noopener noreferrer">
        박다빈
      </a>
      <a class="gnb-menu-item" href="https://stile.im" target="_blank" rel="noopener noreferrer">
        노권후
      </a>
      <a class="gnb-menu-item" href="https://www.instagram.com/oneul_is_day/" target="_blank" rel="noopener noreferrer">
        심정빈
      </a>
      <a class="gnb-menu-item" href="https://www.behance.net/caf4d781/projects" target="_blank"
        rel="noopener noreferrer">
        오정은
      </a>
      <a class="gnb-menu-item" href="https://ji009868.github.io/portfolio/" target="_blank" rel="noopener noreferrer">
        배준일
      </a>
      <a class="gnb-menu-item" href="https://dmdhyunk.github.io/react-portfolio/" target="_blank"
        rel="noopener noreferrer">
        김지현
      </a>
    </div>
  </header>

  <!-- ==================== DESIGN WRAPPER ==================== -->
  <main class="design-wrapper">
    <!-- 맨 위 히어로 (logo.svg) -->
    <section class="design-hero">
      <img src="public/design/logo.svg" class="design-hero-img" alt="Project H Design Hero" />
    </section>

    <section class="design-kiosk">
      <img src="public/design/kiosk.svg" class="design-kiosk-img" alt="kiosk" />
    </section>

    <div class="design-blue-box">
      <img src="public/design/ticket_1.svg" class="ticket ticket-1" alt="ticket 1" />
      <img src="public/design/ticket_2.svg" class="ticket ticket-2" alt="ticket 2" />
      <img src="public/design/ticket_3.svg" class="ticket ticket-3" alt="ticket 3" />
      <img src="public/design/ticket_4.svg" class="ticket ticket-4" alt="ticket 4" />
      <img src="public/design/ticket_5.svg" class="ticket ticket-5" alt="ticket 5" />
    </div>

    <img src="public/design/branding.svg" class="design-branding" alt="branding" />

    <img src="public/design/typography.svg" class="design-typography" alt="typography" />

    <img src="public/design/color.svg" class="design-color" alt="color" />

    <img src="public/design/icon.svg" class="design-icon" alt="icon" />

    <img src="public/design/footer.svg" class="design-footer" alt="footer" />

    <video class="design-kiosk-vod" src="public/kioskVod.mp4" autoPlay loop muted playsInline preload="auto"></video>
  </main>

  <script>
    (function () {

      /* ==========================
         GNB SCROLL HIDE
      ========================== */
      const gnb = document.querySelector(".gnb");
      let lastScrollY = window.pageYOffset;
      let ticking = false;

      function handleGnbScroll(currentY) {
        const diff = currentY - lastScrollY;

        if (diff > 10) {
          gnb.classList.add("gnb--hidden");
        } else if (diff < -10) {
          gnb.classList.remove("gnb--hidden");
        }
      }

      /* ==========================
         TICKET STACK SCROLL ANIMATION
      ========================== */
      const tickets = document.querySelectorAll(".ticket");
      const blueBox = document.querySelector(".design-blue-box");

      function handleTicketScroll(currentY) {
        const boxTop = blueBox.offsetTop - window.innerHeight + 200;  // 등장 트리거
        const boxBottom = blueBox.offsetTop + blueBox.offsetHeight;

        // ▶ 스크롤이 티켓 영역에 들어왔을 때
        if (currentY > boxTop && currentY < boxBottom) {
          tickets.forEach(ticket => ticket.classList.add("ticket--active"));
        }
        // ▶ 스크롤이 벗어나면 다시 초기화
        else {
          tickets.forEach(ticket => ticket.classList.remove("ticket--active"));
        }
      }

      /* ==========================
         MAIN SCROLL LISTENER
      ========================== */
      function handleScroll() {
        const currentY = window.pageYOffset;

        handleGnbScroll(currentY);
        handleTicketScroll(currentY);

        lastScrollY = currentY;
        ticking = false;
      }

      window.addEventListener("scroll", () => {
        if (!ticking) {
          window.requestAnimationFrame(handleScroll);
          ticking = true;
        }
      });

      handleScroll();
    })();

    (function () {
      const menuBtn = document.querySelector(".gnb-menu");
      const panel = document.querySelector(".gnb-menu-panel");

      if (!menuBtn || !panel) return;

      // 햄버거 클릭 -> 열고 닫기
      menuBtn.addEventListener("click", function (e) {
        e.stopPropagation();
        panel.classList.toggle("is-open");
      });

      // 패널 안 링크 클릭 시 자동 닫기
      panel.addEventListener("click", function (e) {
        if (e.target.matches(".gnb-menu-item")) {
          panel.classList.remove("is-open");
        }
      });

      // 바깥 영역 클릭 시 닫기
      document.addEventListener("click", function (e) {
        if (!panel.classList.contains("is-open")) return;
        if (panel.contains(e.target) || menuBtn.contains(e.target)) return;
        panel.classList.remove("is-open");
      });

      // 스크롤 내리면 자동으로 닫기 (원하면 제거해도 됨)
      window.addEventListener("scroll", function () {
        if (panel.classList.contains("is-open")) {
          panel.classList.remove("is-open");
        }
      });
    })();
  </script>

</body>

</html>